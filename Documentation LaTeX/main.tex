\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro

    \usepackage{iftex}
    \ifPDFTeX
        \usepackage[T1]{fontenc}
        \IfFileExists{alphabeta.sty}{
              \usepackage{alphabeta}
          }{
              \usepackage[mathletters]{ucs}
              \usepackage[utf8x]{inputenc}
          }
    \else
        \usepackage{fontspec}
        \usepackage{unicode-math}
    \fi

    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage{array}     % table support for pandoc >= 2.11.3
    \usepackage{calc}      % table minipage width calculation for pandoc >= 2.11.1
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}

    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}


    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{\LARGE{Tube Amplification Guitar Pedal\vspace{1mm} }}
    
    
    
    \author{\Large{Rishi Nandha V\vspace{1mm} \\With Guidance \& Help from Mr. Peter Bossier and Mr. Bart Boydens}}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.61,0.40,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.80,0.25,0.22}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.46,0.46,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.41,0.47,0.13}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.36,0.12}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.52,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{0.89,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb.
    \makeatletter
        \newbox\Wrappedcontinuationbox
        \newbox\Wrappedvisiblespacebox
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}}
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}}
        \newcommand*\Wrappedcontinuationindent {3ex }
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox}
        % Take advantage of the already applied Pygments mark-up to insert
        % potential linebreaks for TeX processing.
        %        {, <, #, %, $, ' and ": go to next line.
        %        _, }, ^, &, >, - and ~: stay at end of broken line.
        % Use of \textquotesingle for straight quote.
        \newcommand*\Wrappedbreaksatspecials {%
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}%
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}%
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}%
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}%
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}%
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}%
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}%
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}%
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}%
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}%
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}%
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}%
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}%
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}%
        }
        % Some characters . , ; ? ! / are not pygmentized.
        % This macro makes them "active" and they will insert potential linebreaks
        \newcommand*\Wrappedbreaksatpunct {%
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}%
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}%
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}%
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}%
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}%
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}%
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}%
            \catcode`\.\active
            \catcode`\,\active
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active
            \lccode`\~`\~
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%

        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}

    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    \usepackage[charter]{mathdesign}
    \usepackage{minted}
    \definecolor{bg}{rgb}{0.9, 0.9, 0.9}
    \newcommand{\inline}[1]{\colorbox{bg}{\texttt{#1}}}
    
    \newcommand{\tab}{\hspace*{6mm}}
    

\begin{document}
    
    \maketitle

    \section{Background}
\tab Before the age of semiconductors, for the purpose of signal amplification, Vacuum Tube Triodes were used. These got replaced by transistors eventually due to the uncertainity in behaviour of these tubes and the variation induced by the surroundings of the Tube. Nevertheless, a good amount transistor circuit design ideas originate from our experience with these Tubes that preceded them: Class-A and Class-AB amplifiers especially.\\~\\
\tab Although these Tubes are deprecated in most electronics applications, these are particularly sought after in the Music world. The iconic "distortion" sound that guitarists use til-date is but an artefact of amplification using such tubes. The classic amplifier heads used in the 80s and 90s were all using tubes and rectifiers to process the signal that comes out of a guitar, and are considered the peak of guitar signal processing even today.\\~\\
\tab Even though amplifier simulations model this distortion from the tubes well, there is still some scope to try out using actual tubes to do the same. Moreover, with the amount of transparency that has been achieved today with solid state or digital amplifiers and nearly-flat response speakers, the iconic "distortion" sound could potentially be captured in a guitar pedal that adds a pre-amplification audio effect instead of a full-size amplifier head. Hence we try to build a Guitar Pedal with a Tube Amplifier with knobs controlling key parameters that affect the response.
\section{Schematic Design}
We divide the schematic into 5 sections for convenience:
\begin{enumerate}
    \item Input Stage
    \item Tube Amplification Stages
    \item Tone Control
    \item Output Stage
    \item Power Regulation
\end{enumerate}
\newpage
\subsection{Input Stage}
\tab The Input Stage includes a fuse and a non-inverting Op-Amp amplifier. This stage is connected with a dual switch to bypass it when we choose to. This stage is to be used \textbf{1.} When we are still prototyping and testing the tube stage of the circuit just so that any human error won't affect the Guitar's electronics or \textbf{2.} When we need more control on the Input Volume that is being fed into the Tube Amplification Stage. In cases when this stage is not absolutely necessary, we bypass it so as to cut down on the noise introduced by this stage.\\

\tab The fuse is essentially a measure to protect the guitar from any large surge of current in case the experimentation in the pedal main amplification stages causes one. This is followed by biasing the signal to a DC value of 6V so that we can use the Op-Amp with just our 12V and GND lines as the power lines. The non-inverting amplifier with a potentiometer in the feedback path lets us control the input volume that is being fed into the grid of the first tube amplification stage thus giving us more control on over-driving the tube or not. Moreover a non-inverting amplifier is chosen so that the amount of current drawn from the guitar pickup itself is minimized.
\begin{center}\includegraphics[height=10cm]{sch_input.png}\\\small{Figure 1: Schematic - Input Stage}\end{center}
\tab As for the values used, we assume that 50mA is a safe amount of current to flow (even though not much should flow because we have connect it such that not much current will flow). The non-inverting amplifier's R1 and RP2 values are chosen to emulate the typical range of the output impedance of guitar pickups. Note here that Guitar Signal can be anywhere from $100mV - 1V$.
\newpage
\subsection{Tube Amplification Stages}
\tab Let us motivate how a tube works a little before diving in. The tube's cathode is heated with the rated voltage to initiate electron generation. The relative voltage between the anode and cathode drives current flow. This is controlled using the potential at the grid that comes in between the cathode \& anode, which resists the flow from cathode across itself before it reaches the anode.
\subsubsection{Class - A Amplifiers}
\tab The tube amp stage consists of two \textbf{Class-A Amplifiers} (See the figure below). The tube's three terminals are biased to a DC point of operation by setting the resistances and $V_A$. The point of operation is decided against the characteristic in the data-sheet based on the desired small signal behaviour.
\begin{center}\includegraphics[height=9cm]{class-a.png}\\\small{Figure 2: Class-A Tube Amplifier}\end{center}
\tab Going in an orderly fashion from left to right: $R_{GB}$ must be a high resistance that makes the input impedance large ("Hi-Z") and sets the grid's DC point at $0V$. $R_G$ is used to damp oscillations higher than 20kHz. To explain this, we think about what happens once we amplify the AC small signal, the amplified output will cause miller effect making the parasitic capacitance $C_{GA}$ between grid and anode in the tube a large capacitance with which $R_G$ interacts to give a dominant pole in the system. $R_K$ is used to bias the Cathode. $R_A$ is used to bias the Anode  and control the small signal gain . We'll discuss the exact calculation of these two resistances soon. $C_B$ is essentially a decoupling capacitor (In-fact, we'll benefit from having several different valued capacitors in parallel combination in-place of $C_B$).\\

\tab Let us calculate these above resistances and capacitances setting the value of $V_a = 140V$ as our starting point. Then let us add potentiometers to allow for small tweaks. Note that we will be doing two stages of this and the second stage is just the first stage without the additional input handling, hence we use the same values for both. Also we can set $R_{GB} = 1Meg \ ; \ C_B = 33\mu$ for both cases since these just need to be arbitrarily large. 
\newpage
\subsubsection{The Distorted Tone}
\tab Below is the $I_p$ vs $V_G$ plot of the 12AT7 Tube where $I_p$ stands for the current through $R_A$ towards the Anode and $V_G$ is the potential at the grid. We are looking at this particular characteristic because $V_G$ is going to be our input and $I_p$ is going to determine the potential drop across $R_A$ to result in our output.
\begin{center}
    \includegraphics[width=\textwidth]{Documentation LaTeX/Ip_v_Vg.png}\\
    \small{Figure 3: 12AT7 Plate Current vs Grid Voltage Characteristic}
\end{center}~\\
\tab We need to operate at the most non-linear region of this characteristic. This causes the $V_{out}$ vs $V_{in}$ characteristic to be non-linear which generate harmonics to the given Input. This is the bread-and-butter of distortion. These harmonics make the Guitar sound fuller by occupying a larger and thicker area of the frequency spectrum. \\~\\
\tab To the best of our ability, we can estimate non-linearity by drawing circles through 3 consecutive points and comparing the curvature. Below are 3 circles ‘c’, ‘d’ and ‘e’ drawn through 3 consecutive data points on the 100V curve to estimate the 2nd order deviations at -2V, -1.5V and -1V respectively. Clearly ‘d’ has the most deviation, hence we choose the operating point of \textbf{100V and -1.5V}
\vspace{20mm}
\begin{center}
    \includegraphics[width=\textwidth]{Documentation LaTeX/curvature.png}\\
    \small{Figure 4: Comparing Curvatures}
\end{center}
\subsubsection{Calculations}
\tab So far we've decided the operating point to be $V_A = 140V$, $V_p = 100V$ and $V_G = -1.5V$. Now we can refer to the same characteristic above and find out that $I_p = 2 mA$. For choosing $R_A$:
\[R_A\left(\frac{2}{1000}\right) = 140 - 100\] \[\implies \ \boxed{R_A = 20 k \Omega}\] 
Further for $R_K$, we have:
\[R_K\left(\frac{2}{1000}\right) = 1.5\] \[\implies \ \boxed{R_K = 750 \Omega}\]
\newpage
\tab Now that the DC points are set, let us move on to small-signal. Below are the characteristics given for small-signal in the Datasheet.
\begin{center}
    \includegraphics[width=\textwidth]{Documentation LaTeX/smallsignal.png}\\
    \small{Figure 5: Small-Signal Characteristics}
\end{center}
\tab From the characteristic we can estimate our $g_m = 2.5 \cdot 10^{-3} \Omega^{-1}$ and $r_p = 20 k \Omega$. The small signal gain $A_v$ is given by: \[i_p = \left(-\frac{v_{\text{out}}}{R_A}\right) = g_m v_\text{in} + \left(-\frac{v_{\text{out}}}{r_p}\right)\]
\[\implies A_v = g_m\left(R_A \ || \ r_p\right)\]
\[\implies \boxed{A_v = 25}\]
\tab Using the obtained $A_v$, we need to choose an $R_G$. Like discussed earlier, we need to find the 3-dB frequency of the dominant pole caused by the interaction of the miller capacitance between grid and anode with $R_G$. From the datasheet $C_{GA} = 1.5 pF$
\[\frac{1}{2\pi R_G C_{GA} A_v} \geq 20kHz \implies \boxed{R_G \leq 212 k \Omega}\]

\tab Last but not least, we need to make sure our output never exceeds $V_A$. This will cause harsh clipping and/or unexpected behaviour. Since the below calculated peak is lesser than 140V, we are good to go. \[\boxed{100 + 1 \cdot 25 = 125V < 140V}\]

\subsubsection{Final Schematic}
\tab Let us allow for some more fine tweaking by adding potentiometers and fixed resistors in series to let us tweak within a given range of values. Thus we would have the below schematic:
\begin{center}\includegraphics[width = \textwidth]{sch_tube.png}\\\small{Figure 6: Schematic - Tube Stage}\end{center}
\newpage
\subsection{Tone Control}
\tab For tone control we aim to have one knob that takes the response form a bass-heavy to a high-presence. To achieve this with only passive elements, a decent amount of hit-and-miss was used by simulating different ideas and values in LTSpice. This was achieved using LTSpice:
\begin{center}\includegraphics[width=\textwidth]{Documentation LaTeX/response.png}\\\small{Figure 7: Tone Control Response}\end{center}
\tab Although this was achieved with hit-and-miss and LTSpice simulation, this isn't to say there is not motivation behind this. Note that we can't use a simple bandpass owing to the fact that the signal coming out of the amplifier's first stage has a passive highpass for AC coupling. But we can try to cascade this with two paths resembling a low pass and a high pass respectively but with a potentiometer to control the response and a resistance in series with C6 to avoid having a purely capacitive path (otherwise AC coupling won't happen). We include the transfer function below for completeness. 
\begin{center}\includegraphics[width=0.6\textwidth]{Documentation LaTeX/sch_tone.png}\\\small{Figure 8: Schematic - Tone Control}\end{center}
\[\textbf{Work} = \frac{\textbf{In}}{\textbf{Progress}}\]
\tab Note here that the signal was amplified to almost $25$ times in the first tube stage. Hence we need to attenuate it at the end. Thus there is a 1 Meg pot in series with a $42k\Omega$ resistor to do the attenuation but also give some control on how much the second stage is driven.
\newpage
\vspace*{12mm}
\subsection{Output Stage}
\tab By the time we reach here we have amplified our signal by another factor of 25 or so, which is possibly not what a digital practice amplifier or any home speaker is designed to take. This is the distinction between building a pre-amplifier for an upcoming power amplification stage and building a guitar pedal. The output stage includes a powered path and a passive path. 
\begin{center}\includegraphics[width=\textwidth]{Documentation LaTeX/sch_output.png}\\\small{Figure 7: Schematic - Output Stage}\end{center}
\tab We use the powered path \textbf{1.} When we are still prototyping and need to protect the amplifier with a fuse until the circuit is tried and tested or \textbf{2.} When our practice amplifier is not a "Hi-Z" amplifier in which case the current through the Amplifier will affect our 2nd Tube stage. When the powered path isn't necessary we switch to the passive path so as to cut down on the noise introduced by the powered amplification and fuse. 
\newpage
\subsection{Power Regulation}
\tab 12V, 6V, 140V, 6.3V are all the four power lines required in the pedal. Since tubes consume a lot of energy, taking these off from 9V batteries is infeasible, hence we are left with options to either use transformers with AC or use DC adapters and then use DC-DC converter. Since the latter is a more handier option, we'll proceed with it. Below are the methods used to get these power lines. 
\begin{center}\includegraphics[width=\textwidth]{Documentation LaTeX/sch_power.png}\\\small{Figure 8: Schematic - Power Management}\end{center}
\tab Choosing the fuse is a balance between safety and allowing the pedal draw more when required. The current drawn from the 140V line is about $4 mA$ in total. If we consider above $10 mA$ to be dangerous, we may choose a $10 mA$ fuse on this line. For the total amount of current in everything combined, we can limit it to not more than $0.1A$ just as a rough estimate.  
    \section{Methodology \& Practical Implementation}
    \subsection{Testing Power Regulators}
    To test if all the power regulators are able to deliver the current required and work with an acceptable dropout, we estimate the load on each power-line and add equivalent resist.
    \begin{enumerate}
    \item \textbf{Buck Converter 12V to 6.3V:} From the 12AT7 data sheet, we can see that the current drawn from the 6.3V line will be 
        \item \textbf{Mains AC to 12V DC Adapter:} Major loads on the AC to DC 12V Adapter are the R1-R3 voltage divider, Power lines of Op-Amps U1.2 and U2.1, the U4 Boost Converter and the U5 Buck. R1+R3 gives an equivalent conductance of about $0.1 m\Omega^{-1}$. From the data sheet of LM358 we can estimate the Quiescent Current drawn by the Op-Amps to be roughly around $2\cdot550$ mA. In the spirit of slightly overestimating the current drawn, we can assume the converters to be ideal. 
    \end{enumerate}
    \section{Results}

\end{document}